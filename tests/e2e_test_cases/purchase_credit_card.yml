test_cases:

  - test_case: purchase credit card - home delivery
    steps:
      - user: "I want to purchase a credit card"
        assertions:
          - flow_started: "purchase_credit_card"
          - bot_uttered:
              utter_name: utter_ask_credit_card_type

      - user: "Visa"
        assertions:
          - slot_was_set:
              - name: "credit_card_type"
                value: "Visa"
          - bot_uttered:
              utter_name: utter_ask_delivery_type

      - user: "Home"
        assertions:
          - slot_was_set:
              - name: "delivery_type"
                value: "Home"
          - bot_uttered:
              utter_name: utter_ask_full_address_from_user

      - user: "123 Baker Street, Springfield"
        assertions:
          - slot_was_set:
              - name: "full_address_from_user"
                value: "123 Baker Street, Springfield"
          - bot_uttered:
              utter_name: utter_display_all_info_provided

      - user: "Yes"
        assertions:
          - slot_was_set:
              - name: "confirm_recap"
                value: true
          - bot_uttered:
              utter_name: utter_delivery_to_home
          - bot_uttered:
              utter_name: utter_goodbye

# ====================================================>

  - test_case: purchase credit card - collect from bank
    steps:
      - user: "I need a new credit card"
        assertions:
          - flow_started: "purchase_credit_card"
          - bot_uttered:
              utter_name: utter_ask_credit_card_type

      - user: "Mastercard"
        assertions:
          - slot_was_set:
              - name: "credit_card_type"
                value: "Mastercard"
          - bot_uttered:
              utter_name: utter_ask_delivery_type

      - user: "Bank"
        assertions:
          - slot_was_set:
              - name: "delivery_type"
                value: "Bank"
          - bot_uttered:
              utter_name: utter_ask_full_address_from_user

      - user: "456 Elm Street, Gotham"
        assertions:
          - slot_was_set:
              - name: "full_address_from_user"
                value: "456 Elm Street, Gotham"
          - bot_uttered:
              utter_name: utter_display_all_info_provided

      - user: "Yes"
        assertions:
          - slot_was_set:
              - name: "confirm_recap"
                value: true
          - bot_uttered:
              utter_name: utter_collect_from_bank
          - bot_uttered:
              utter_name: utter_goodbye

# ====================================================>

  - test_case: purchase credit card - user not confirmed
    steps:
      - user: "I'd like to apply for a credit card"
        assertions:
          - flow_started: "purchase_credit_card"
          - bot_uttered:
              utter_name: utter_ask_credit_card_type

      - user: "Visa"
        assertions:
          - slot_was_set:
              - name: "credit_card_type"
                value: "Visa"
          - bot_uttered:
              utter_name: utter_ask_delivery_type

      - user: "Home"
        assertions:
          - slot_was_set:
              - name: "delivery_type"
                value: "Home"
          - bot_uttered:
              utter_name: utter_ask_full_address_from_user

      - user: "987 Ocean Avenue, Atlantis"
        assertions:
          - slot_was_set:
              - name: "full_address_from_user"
                value: "987 Ocean Avenue, Atlantis"
          - bot_uttered:
              utter_name: utter_display_all_info_provided

      - user: "No"
        assertions:
          - slot_was_set:
              - name: "confirm_recap"
                value: false
          - bot_uttered:
              utter_name: utter_more_help_needed_handoff_pattern
